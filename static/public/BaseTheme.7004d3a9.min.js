/*! BaseTheme 2015-04-07 11:24:59 */
function debounce(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function getRandomNumber(a,b){return Math.random()*(b-a)+a}function getRandomInt(a,b){return Math.floor(Math.random()*(b-a+1))+a}!function(a){if(a.cookieChoices)return a.cookieChoices;var b=a.document,c="textContent"in b.body,d=function(){function a(a,c,d,e){var i="position:fixed;width:100%;background-color:#eee;margin:0; left:0; top:0;padding:4px;z-index:1000;text-align:center;",j=b.createElement("div");return j.id=q,j.style.cssText=i,j.appendChild(f(a)),d&&e&&j.appendChild(h(d,e)),j.appendChild(g(c)),j}function d(a,c,d,e){var i="position:fixed;width:100%;height:100%;z-index:999;top:0;left:0;opacity:0.5;filter:alpha(opacity=50);background-color:#ccc;",j="z-index:1000;position:fixed;left:50%;top:50%",k="position:relative;left:-50%;margin-top:-25%;background-color:#fff;padding:20px;box-shadow:4px 4px 25px #888;",l=b.createElement("div");l.id=q;var m=b.createElement("div");m.style.cssText=i;var n=b.createElement("div");n.style.cssText=k;var o=b.createElement("div");o.style.cssText=j;var p=g(c);return p.style.display="block",p.style.textAlign="right",p.style.marginTop="8px",n.appendChild(f(a)),d&&e&&n.appendChild(h(d,e)),n.appendChild(p),o.appendChild(n),l.appendChild(m),l.appendChild(o),l}function e(a,b){c?a.textContent=b:a.innerText=b}function f(a){var c=b.createElement("span");return e(c,a),c}function g(a){var c=b.createElement("a");return e(c,a),c.id=r,c.href="#",c.style.marginLeft="24px",c}function h(a,c){var d=b.createElement("a");return e(d,a),d.href=c,d.target="_blank",d.style.marginLeft="8px",d}function i(){return n(),m(),!1}function j(c,e,f,g,h){if(o()){m();var j=h?d(c,e,f,g):a(c,e,f,g),k=b.createDocumentFragment();k.appendChild(j),b.body.appendChild(k.cloneNode(!0)),b.getElementById(r).onclick=i}}function k(a,b,c,d){j(a,b,c,d,!1)}function l(a,b,c,d){j(a,b,c,d,!0)}function m(){var a=b.getElementById(q);null!=a&&a.parentNode.removeChild(a)}function n(){var a=new Date;a.setFullYear(a.getFullYear()+1),b.cookie=p+"=y; expires="+a.toGMTString()}function o(){return!b.cookie.match(new RegExp(p+"=([^;]+)"))}var p="displayCookieConsent",q="cookieChoiceInfo",r="cookieChoiceDismiss",s={};return s.showCookieConsentBar=k,s.showCookieConsentDialog=l,s}();return a.cookieChoices=d,d}(this);var isset=function(a){return"undefined"!=typeof a?!0:!1},getViewportSize=function(){var a=window,b="inner";return"innerWidth"in window||(b="client",a=document.documentElement||document.body),{width:a[b+"Width"],height:a[b+"Height"]}};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){window.clearTimeout(a)}}();var addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},removeClass=function(a,b){if(a.classList)a.classList.remove(b);else{a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi"),"");var c=a.className.length-1;" "==a.className[c]&&(a.className=a.className.substring(0,c))}},replacePlaceholder=function(){Modernizr.input.placeholder||($("[placeholder]").focus(function(){var a=$(this);a.val()==a.attr("placeholder")&&(a.val(""),a.removeClass("placeholder"))}).blur(function(){var a=$(this);(""===a.val()||a.val()==a.attr("placeholder"))&&(a.addClass("placeholder"),a.val(a.attr("placeholder")))}).blur(),$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var a=$(this);a.val()==a.attr("placeholder")&&a.val("")})}))};!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(a){a.fn.dcSpamless=function(b){var c={reverse:!0,splitDomain:"[dot]",splitName:"[at]",mailto:!0},b=a.extend(c,b);return this.each(function(b){var d=c.splitDomain,e=c.splitName,f=a(this).is("a")?a(this).attr("href").replace("mailto:","").replace(d,".").replace(e,"@"):a(this).text().replace(d,".").replace(e,"@");f=1==c.reverse?f.split("").reverse().join(""):f,a(this).is("a")?a(this).attr("href","mailto:"+f):(c.mailto===!0&&(f='<a href="mailto:'+f+'">'+f+"</a>"),a(this).html(f))})}}(jQuery);var BaseThemeAbstractPage=function(a,b){var c=this;console.log("Page - "+a),c.init(a,b)};BaseThemeAbstractPage.prototype.init=function(a,b){var c=this;c.id=a,c.context=b,c.$cont=$("#page-content-"+c.id),c.type=c.$cont.length?c.$cont[0].getAttribute("data-node-type"):"page",c.blocks=[],c.$block=c.$cont.find(".page-block"),c.blockLength=c.$block.length,"static"==c.context&&c.$cont.length&&c.init(),"static"==c.context,c.blockLength&&c.initBlocks(),"ajax"==c.context&&c.initAjax(),c.initEvents()},BaseThemeAbstractPage.prototype.initEvents=function(){var a=this;BaseTheme.$window.on("resize",debounce($.proxy(a.resize,a),100,!1))},BaseThemeAbstractPage.prototype.destroy=function(){var a=this;if(TweenLite.to(a.$cont,.6,{opacity:0,onComplete:function(){a.$cont.remove()}}),a.destroyEvents(),null!==a.blocks)for(var b=0;b<a.blockLength;b++)a.blocks[b].destroy()},BaseThemeAbstractPage.prototype.destroyEvents=function(){var a=this;BaseTheme.$window.off("resize",debounce($.proxy(a.resize,a),100,!1))},BaseThemeAbstractPage.prototype.initAjax=function(){var a=this,b=a.$cont[0].getAttribute("data-meta-title");null!==b&&""!==b&&(document.title=b)},BaseThemeAbstractPage.prototype.initBlocks=function(){for(var a=this,b=0;b<a.blockLength;b++)a.blocks[b]=new BaseThemeBlock(a.$block[b].id)},BaseThemeAbstractPage.prototype.resize=function(){console.log("-> Page resize")};var BaseThemePage=function(a,b){var c=this;console.log("-> Page"),c.init(a,b)};$.extend(BaseThemePage.prototype,BaseThemeAbstractPage.prototype);var BaseThemeProject=function(a,b){var c=this;console.log("-> Project"),c.init(a,b)};$.extend(BaseThemeProject.prototype,BaseThemeAbstractPage.prototype);var BaseThemeBlock=function(a){var b=this;b.$cont=$("#"+a),b.init()};BaseThemeBlock.prototype.init=function(){var a=this;a.initEvents()},BaseThemeBlock.prototype.initEvents=function(){var a=this;BaseTheme.$window.on("resize",debounce($.proxy(a.resize,a),50,!1))},BaseThemeBlock.prototype.destroy=function(){var a=this;a.destroyEvents()},BaseThemeBlock.prototype.destroyEvents=function(){var a=this;BaseTheme.$window.off("resize",debounce($.proxy(a.resize,a),50,!1))},BaseThemeBlock.prototype.resize=function(){};var BaseThemeHistory=function(){var a=this;a.state=null,a.stateBlock=!0,a.$link=$(".ajax-link"),a.init()};BaseThemeHistory.prototype.init=function(){var a=this;a.$link.on("click",$.proxy(a.linkClick,a)),History.Adapter.bind(window,"statechange",$.proxy(a.stateChange,a))},BaseThemeHistory.prototype.destroy=function(){},BaseThemeHistory.prototype.stateChange=function(){var a=this;a.state=History.getState(),a.stateBlock||(a.context=a.state.data.context,a.loadPage(),a.relativeUrl=a.state.url.substring(a.baseUrl.length),"undefined"!=typeof ga&&ga("send","pageview",{page:"/"+a.relativeUrl,title:a.state.title}))},BaseThemeHistory.prototype.linkClick=function(a){var b=this,c=a.currentTarget.className;if(-1==c.indexOf("active")&&!b.transition){b.transition=!0,null===b.state&&(History.pushState({node_type:BaseTheme.page.type,node_name:BaseTheme.page.id,index:parseInt(a.currentTarget.getAttribute("data-index")),transition:a.currentTarget.getAttribute("data-node-type")+"_to_"+BaseTheme.page.type,context:"link",is_home:BaseTheme.page.isHome},document.title,window.location.href),b.stateBlock=!1);var d=a.currentTarget.className.indexOf("nav-item-link")>=0?"nav":"link",e=a.currentTarget.getAttribute("data-is-home"),f="1"==e?!0:!1,g=a.currentTarget.getAttribute("data-title");""===g&&(g=a.currentTarget.innerHTML),History.pushState({node_type:a.currentTarget.getAttribute("data-node-type"),node_name:a.currentTarget.getAttribute("data-node-name"),index:parseInt(a.currentTarget.getAttribute("data-index")),transition:BaseTheme.page.type+"_to_"+a.currentTarget.getAttribute("data-node-type"),context:d,is_home:f},g,a.currentTarget.href)}a.preventDefault()},BaseThemeHistory.prototype.loadPage=function(){var a=this;a.loadingBeginDate=new Date,$.ajax({url:a.state.url,type:"get",success:function(b){BaseTheme.$ajaxContainer.append(b),TweenLite.to(BaseTheme.page.$cont,.8,{opacity:0,delay:0,ease:Expo.easeOut}),BaseTheme.page.destroy(),BaseTheme.pageFuture=new MraPage(a.state.data.node_name,"ajax",a.state.data.is_home),BaseTheme.pageFuture.$cont.waitForImages({finished:$.proxy(BaseTheme.pageLoaded,a),waitForAll:!0})}})},BaseThemeHistory.prototype.pageLoaded=function(){var a=this;BaseTheme.pageFuture.init(),BaseTheme.page=BaseTheme.pageFuture,BaseTheme.pageFuture=null,a.loadingEndDate=new Date,a.loadingDuration=a.loadingEndDate-a.loadingBeginDate;var b=a.loadingDuration>1200?0:1200-a.loadingDuration,c=800+b;setTimeout(function(){BaseTheme.page.animateContent(),enableScroll()},b),BaseTheme.nav.$item.removeClass("active"),BaseTheme.nav.$link.removeClass("active");var d=$("#nav-item-"+a.state.data.node_name),e=$("#nav-link-"+a.state.data.node_name);d.length&&addClass(d[0],"active"),e.length&&addClass(e[0],"active"),setTimeout(function(){a.transition=!1},c)},BaseThemeHistory.prototype.updateLink=function(){var a=this;a.$link.off("click",$.proxy(a.linkClick,a)),a.$link=$(".ajax-link"),a.$link.on("click",$.proxy(a.linkClick,a))};var BaseThemeNav=function(){var a=this;console.log("Nav"),a.$cont=BaseTheme.$nav,a.$list=$("#nav-list"),a.$item=a.$list.find(".nav-item"),a.$link=a.$list.find(".nav-link"),a.init()};BaseThemeNav.prototype.init=function(){var a=this;a.initEvents()},BaseThemeNav.prototype.initEvents=function(){var a=this;BaseTheme.$window.on("resize",debounce($.proxy(a.resize,a),100,!1))},BaseThemeNav.prototype.destroyEvents=function(){var a=this;BaseTheme.$window.off("resize",debounce($.proxy(a.resize,a),100,!1))},BaseThemeNav.prototype.destroy=function(){var a=this;a.destroyEvents()},BaseThemeNav.prototype.resize=function(){console.log("-> Nav resize")};var BaseTheme={};BaseTheme.$window=null,BaseTheme.$body=null,BaseTheme.windowSize={width:1920,height:1280},BaseTheme.firstResize=!0,BaseTheme.$nav=null,BaseTheme.nav=null,BaseTheme.isMobile=!1,BaseTheme.isIE=!1,BaseTheme.page=null,BaseTheme.pageFuture=null,BaseTheme.discriminatorMap={page:"BaseThemePage",project:"BaseThemeProject","block-basic":"BaseThemeBlockBasic"},BaseTheme.$ajaxContainer=null,BaseTheme.ajaxEnabled=!1,BaseTheme.onDocumentReady=function(a){for(var b in temp)BaseTheme[b]=temp[b];BaseTheme.init()},BaseTheme.init=function(){var a=this;TweenLite.defaultEase=Expo.easeOut,a.$window=$(window),a.$body=$("body");var b=getViewportSize();a.windowSize={width:b.width,height:b.height},a.isMobile=isMobile.any===!1?!1:!0,a.isMobile&&addClass(a.$body[0],"is-mobile"),a.$body[0].className.indexOf("ie")>=0&&(a.isIE=!0),a.$nav=$("#nav"),a.$nav.length&&(a.nav=new BaseThemeNav);var c=a.$body[0].getAttribute("data-node-type");c?(console.log(a.discriminatorMap[c]),a.page=new window[a.discriminatorMap[c]](a.$body[0].id,"static")):a.page=new BaseThemeAbstractPage(a.$body[0].id,"static"),a.$window.on("resize",debounce($.proxy(a.resize,a),50,!1)),a.$window.on("orientationchange",debounce($.proxy(a.resize,a),50,!1)),a.$window.trigger("resize")},BaseTheme.resize=function(){var a=this;console.log("-> Resize");var b=getViewportSize();(b.width!==a.windowSize.width||b.height!==a.windowSize.height||a.firstResize)&&(a.windowSize=getViewportSize(),console.log(a.windowSize.width),a.firstResize&&(a.firstResize=!1))},$(document).ready(BaseTheme.onDocumentReady);