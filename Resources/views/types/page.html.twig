{% extends head.ajax ? 'base.ajax.twig' : 'base.html.twig' %}

{% set headerImages = nodeSource.headerImage %}
{% block header %}
<header>
	{% for headerImage in headerImages %}
	<figure>
		<img alt="{{ nodeSource.title }}" src="{{ headerImage|url(themeServices.imageFormats.headerImage) }}" />
	</figure>
	{% endfor %}
</header>
{% endblock %}

{% block content %}
	<section class="page-content{% if node.home %} home-content{% endif %}{% if head.ajax %} page-content-ajax{% endif %}" id="page-content-{{ node.nodeName }}"
             data-title="{{ title }}"
             data-node-type="{{ node.nodeType.name|lower }}"
             data-meta-title="{{ pageMeta.title }}">
		<h1>{{ nodeSource.title }}</h1>
		<div>{{ nodeSource.content|markdown }}</div>
		
		<div class="page-blocks">
			
			{# Page blocks pattern implementation #}
	        {% set blocks = nodeSource|children %}
	        {% for singleBlock in blocks %}

	        	<article class="page-block page-block-{{ singleBlock.node.nodeType.name|lower }}" id="block-{{ singleBlock.node.nodeName }}" 
	        	         data-index="{{ loop.index0 }}" data-node-type="{{ singleBlock.node.nodeType.name|lower }}">

	         	</article>
	            
	        {% endfor %}
	        
		</div>

		<div class="image">
			{% for document in nodeSource.images %}

				{% set imageMetas = document.documentTranslations.first %}
				<figure class="uk-thumbnail">
					{{ document|display(themeServices.imageFormats.thumbnail) }}
					<figcaption>{{ imageMetas.name }} â€” {{ imageMetas.copyright }}</figcaption>
				</figure>
			{% endfor %}
		</div>
	</section>
{% endblock %}
